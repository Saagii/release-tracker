<div class="w-full h-screen flex border-b border-gray-200">

    <!-- Basic details block -->
    <div class="w-4/12 h-full border-r border-gray-200 py-4 pr-6 pl-8">

        <!-- Title Content -->
        <div class="w-full flex justify-between items-center">
            <div class="w-fit font-bold flex items-center"><span class="text-blue-600 cursor-pointer uppercase hover:underline" [routerLink]="['../']">Clients</span> <span class="mx-2 font-bold text-3xl">&#xB7;</span> <span class="text-normal uppercase">View</span></div>
            <div class="flex justify-end items-center">
                <span class="w-fit px-2 uppercase text-xs rounded-full mr-2" [ngClass]="getStatusStyle(filterRequiredIds('client_status', clientDetails.clientStatus))">{{filterRequiredIds('client_status', clientDetails.clientStatus)}}</span>
                <button mat-icon-button class="" [matMenuTriggerFor]="clientProfileMenu">
                    <mat-icon class="text-base">more_vert</mat-icon>
                </button>

                <mat-menu #clientProfileMenu="matMenu">
                    <div class="px-4 py-2 flex cursor-pointer items-center" matRipple>
                      <mat-icon class="text-base mr-2">edit</mat-icon>
                      <div class="text-sm">Edit</div>
                    </div>
                    <div class="px-4 py-2 flex cursor-pointer items-center" matRipple>
                      <mat-icon class="text-lg mr-2">block</mat-icon>
                      <div class="text-sm">Deactivate</div>
                    </div>
                    <div class="px-4 py-2 flex cursor-pointer items-center" matRipple>
                        <mat-icon class="text-lg mr-2">settings</mat-icon>
                        <div class="text-sm">Settings</div>
                      </div>
                </mat-menu>
            </div>
        </div>

        <!-- Client Logo -->
        <div class="w-full flex mt-4">
            <div class="p-4 bg-blue-500 font-bold text-white rounded-md border-4 border-gray-200 uppercase">{{clientDetails.clientName[0] + clientDetails.clientName[1]}}</div>
        </div>

        <!-- Client Name -->
        <div class="mt-2 flex items-center">
            <span class="text-2xl mr-2">{{clientDetails.clientName}}</span>
        </div>

        <!-- Client About -->
        <div class="w-full mt-4">
            <div class="uppercase text-gray-600 text-xs">About</div>
            <div class="mt-2 text-xs">
                {{clientDetails.clientAbout}}
            </div>
        </div>

        <!-- Divider -->
        <div class="w-full flex justify-start my-5">
            <div class="w-2/12 border border-gray-200"></div>
        </div>

        <!-- Client Location & Website -->
        <div class="w-full my-8">
            <div class="uppercase text-gray-600 text-xs">Location & Website</div>
            <div class="mt-2 text-xs flex items-center">
                <mat-icon class="text-gray-400 text-base">location_on</mat-icon> {{clientDetails.clientCity}}, {{clientDetails.clientState}}, {{clientDetails.clientCountry}}
            </div>
            <div class="mt-2 text-xs flex items-center">
                <mat-icon class="text-gray-400 text-base">language</mat-icon> {{clientDetails.clientWebsite}}
            </div>
        </div>

        <!-- Divider -->
        <div class="w-full flex justify-start my-5">
            <div class="w-2/12 border border-gray-200"></div>
        </div>

        <!-- Client Representatives -->
        <div class="w-full my-8">
            <div class="uppercase text-gray-600 text-xs">Client Members</div>
            <div class="w-full mt-2 flex flex-wrap">
                <div class="mb-2 mr-2" *ngFor="let member of clientDetails.clientMembers">
                    <div class="w-fit flex items-center text-xs border border-gray-300 rounded-full p-1 pr-2 cursor-pointer hover:text-blue-600 hover:border-blue-600" [routerLink]="['../../admin/members', member]">
                        <span class="uppercase p-1 px-2 rounded-full bg-gray-200 mr-2 text-xs font-bold">{{filterRequiredIds('teamMember', member)[0]}}</span> {{filterRequiredIds('teamMember', member)}}
                    </div>
                </div>
            </div>
        </div>


    </div>

    <!-- Advanced details block -->
    <div class="w-8/12 h-full">

        <!-- Header -->
        <div class="w-full p-4 flex justify-between items-center">
            <div class="">
                <div class="text-lg">Client Aspects</div>
                <div class="text-xs text-gray-600">View all the aspects that align in terms of services or products.</div>
            </div>
            <button mat-icon-button class="" matTooltip="View Client Analytics">
                <mat-icon class="text-blue-600">assessment</mat-icon>
            </button>
        </div>
        


        <!-- Client Associations: Projects, Domains, Releases, Demos -->
        <div class="w-full h-full">
            <mat-tab-group class="h-full" mat-align-tabs="start">

                <!-- Projects Tab -->
                <mat-tab label="Projects">
                    <div class="w-full p-4 border-t border-gray-200">
                        <div class="w-full border border-gray-200 rounded-md" *ngIf="projectsList?.length">
                            <div class="w-full flex text-xs font-bold justify-between items-center px-4 py-2 rounded-t-md border-b border-gray-100 bg-gray-50 text-gray-600">
                                <div class="w-4/12">Project Name</div>
                                <div class="w-3/12">Project Manager</div>
                                <div class="w-2/12">Team Members</div>
                                <div class="w-2/12">Status</div>
                                <div class="w-1/12">Action</div>
                            </div>
                            <div class="w-full px-4 py-2 border-b border-gray-200" *ngFor="let project of projectsList">
                                <div class="w-full text-xs flex justify-between items-center">
                                    <div class="w-4/12">
                                        <span class="hover:underline hover:text-blue-600 cursor-pointer w-fit" [routerLink]="['../../projects', project._id]">{{project.projectName}}</span>
                                    </div>
                                    <div class="w-3/12">
                                        <span class="hover:underline hover:text-blue-600 cursor-pointer w-fit" [routerLink]="['../../admin/members', project.projectManagerId]">{{filterRequiredIds('teamMember', project.projectManagerId)}}</span>
                                    </div>
                                    <div class="w-2/12">{{project.teamMembers.length}} Members</div>
                                    <div class="w-2/12">
                                        <div class="w-fit px-2 py-0.5 uppercase text-xs rounded-full" [ngClass]="getStatusStyle(filterRequiredIds('project_status', project.statusId))">{{filterRequiredIds('project_status', project.statusId)}}</div>
                                    </div>
                                    <div class="w-1/12 flex">
                                        <button mat-icon-button class="text-gray-600" [matMenuTriggerFor]="clientProjectMenu">
                                            <mat-icon class="text-base">more_vert</mat-icon>
                                        </button>
                                        <mat-menu #clientProjectMenu="matMenu">
                                            <div class="px-4 py-2 flex cursor-pointer items-center" matRipple [routerLink]="['../../projects', project._id]">
                                                <mat-icon class="text-base mr-2">remove_red_eye</mat-icon>
                                                <div class="text-sm">View</div>
                                              </div>
                                            <div class="px-4 py-2 flex cursor-pointer items-center" matRipple>
                                              <mat-icon class="text-base mr-2">edit</mat-icon>
                                              <div class="text-sm">Edit</div>
                                            </div>
                                        </mat-menu>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- If no projects created under client -->
                        <div class="w-full py-14" *ngIf="!projectsList?.length">
                            <div class="text-gray-600 text-center">Start your first project with {{clientDetails.clientName}}.</div>
                            <div class="mt-4 flex justify-center">
                                <button mat-flat-button class="" color="primary" [routerLink]="['../../projects/create']">Create New Project</button>
                            </div>
                        </div>
                    </div>
                </mat-tab>

                <!-- Domains Tab -->
                <mat-tab label="Domains">
                    <div class="w-full px-4 flex flex-wrap border-t border-gray-200">
                        <div class="w-6/12 p-4" *ngFor="let domain of clientProfileData.domains">
                            <div class="flex justify-between items-center w-full border border-gray-200 rounded-md p-4 hover:border-gray-400">
                                <div class="">
                                    <span class="text-xs text-xs rounded-lg">{{domain.type}}</span>
                                    <div class="text-blue-500 font-bold pt-4">{{domain.path}}</div>
                                    <div class="text-gray-500 text-xs text-gray-400 py-1">Branch: {{domain.branch}}</div>
                                </div>
                                <div class="flex items-start">
                                    <div class="">
                                        <div class="text-right">
                                            <span class="text-right text-xs px-3 py-0.5 rounded-full uppercase" [ngClass]="getStatusStyle(domain.status)">{{domain.status}}</span>
                                        </div>
                                        <div class="pt-1 text-gray-400 text-xs flex content-center"><mat-icon class="text-xs">date_range</mat-icon>Release Date: {{domain.createdDate}}</div>
                                    </div>
                                    <div class="ml-4">
                                        <button mat-icon-button [matMenuTriggerFor]="instanceMenu">
                                            <mat-icon class="text-gray-700">more_vert</mat-icon>
                                        </button>
                                        <mat-menu #instanceMenu="matMenu">
                                            <button mat-menu-item>Edit</button>
                                            <button mat-menu-item>Delete</button>
                                          </mat-menu>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </mat-tab>

                <!-- Releases Tab -->
                <mat-tab label="Releases">
                    <div class="w-full p-4 border-t border-gray-200">
                        <div class="w-full border border-gray-200 rounded-md" *ngIf="releasesList.length">

                            <!-- Filter Block -->
                            <div class="w-full p-4 border-b border-gray-200 flex justify-between">
                                <div class="">
                                    <div class="text-lg">Release List</div>
                                    <div class="text-xs text-gray-500">Click on either of releases for quick view.</div>
                                </div>
                                <div class="">
                                    <button mat-stroked-button class="" color="primary">+ Filter</button>
                                </div>
                                
                            </div>

                            <!-- Release content -->
                            <div class="w-full flex">

                                <!-- Release List -->
                                <div class="w-6/12 border-r border-gray-200"> 
                                    <div class="w-full border-b border-gray-200 cursor-pointer hover:bg-gray-50" *ngFor="let release of releasesList" (click)="releaseQuickView(release)">
                                        <div class="w-full flex justify-between p-4" [ngClass]="{'border-l-4 border-blue-600' : release._id === selectedReleaseDetails?._id}">
                                            <div class="">
                                                <div class="text-base text-gray-700">{{release.releaseTitle}}</div>
                                            </div>
                                            <div class="flex content-center">
                                                <div class="">
                                                    <div class="text-right">
                                                        <span class="text-right text-xs px-3 rounded-full uppercase" [ngClass]="getStatusStyle(filterRequiredIds('release_status', release.releaseStatusId))">{{filterRequiredIds('release_status', release.releaseStatusId)}}</span>
                                                    </div>
                                                    <div class="mt-2 text-gray-500 text-xs flex items-center">Closing On: <span class="text-gray-500 ml-1">{{release.releaseClosingDate | date}}</span></div>
                                                </div>
                                                <div class="ml-4">
                                                    <button mat-icon-button class="text-gray-600">
                                                        <mat-icon>keyboard_arrow_right</mat-icon>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Release Quick View Details Block -->
                                <div class="w-6/12">

                                    <div class="w-full p-4">
                                        <div class="w-full flex justify-between items-center" *ngIf="selectedReleaseDetails">

                                            <!-- Title -->
                                            <div class="w-10/12">
                                                <!-- Quick View Title -->
                                                <div class="text-blue-600 font-bold text-xs">RELEASE QUICK VIEW</div>

                                                <!-- Release Basic Details -->
                                                <div class="w-full mt-2">
                                                    <div class="text-xl flex items-center">{{selectedReleaseDetails.releaseTitle}} <span class="text-right text-xs px-3 rounded-full uppercase ml-3" [ngClass]="getStatusStyle(filterRequiredIds('release_status', selectedReleaseDetails.releaseStatusId))">{{filterRequiredIds('release_status', selectedReleaseDetails.releaseStatusId)}}</span></div>
                                                    <div class="text-xs text-gray-600">
                                                        Created by: <span class="hover:underline hover:text-blue-600 cursor-pointer w-fit" [routerLink]="['../../admin/members', selectedReleaseDetails.releaseCreatedById]">{{filterRequiredIds('teamMember', selectedReleaseDetails.releaseCreatedById)}}</span> on {{selectedReleaseDetails.releaseCreatedOnDate | date:'medium'}}
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- View More Details: Release View Page Navigation -->
                                            <div class="w-2/12 flex justify-end">
                                                <button mat-icon-button class="" matTooltip="View More Details" color="primary" [routerLink]="['../../releases', selectedReleaseDetails?._id]"><mat-icon>launch</mat-icon></button>
                                            </div>
                                        </div>

                                        <!-- Basic Details Content Row 1-->
                                        <div class="w-full flex flex-wrap justify-start mt-10" *ngIf="selectedReleaseDetails">

                                            <!-- Release Priority -->
                                            <div class="w-6/12 mb-6">
                                                <div class="text-xs uppercase text-gray-600">Release Priority</div>
                                                <div class="w-fit">
                                                    <span class="text-white text-xs px-3 py-0.5 rounded-full uppercase"
                                                    [ngClass]="{'bg-red-600' : ['High', 'Highest', 'Critical'].includes(filterRequiredIds('priorities', selectedReleaseDetails.releasePriority)),
                                                    'bg-green-600' : ['Medium'].includes(filterRequiredIds('priorities', selectedReleaseDetails.releasePriority)),
                                                    'bg-black' : ['Blocker'].includes(filterRequiredIds('priorities', selectedReleaseDetails.releasePriority)),
                                                    'bg-blue-600' : ['Low', 'Lowest'].includes(filterRequiredIds('priorities', selectedReleaseDetails.releasePriority))}">
                                                    {{filterRequiredIds('priorities', selectedReleaseDetails.releasePriority)}}
                                                    </span>
                                                </div>
                                            </div>

                                            <!-- Release Owner -->
                                            <div class="w-6/12 mb-6">
                                                <div class="text-xs uppercase text-gray-600">Release Owner</div>
                                                <div class="mt-1 hover:underline hover:text-blue-600 cursor-pointer w-fit" [routerLink]="['../../admin/members', selectedReleaseDetails.releaseOwnerId]">{{filterRequiredIds('teamMember', selectedReleaseDetails.releaseOwnerId)}}</div>
                                            </div>

                                            <!-- Release Type -->
                                            <div class="w-6/12 mb-6">
                                                <div class="text-xs uppercase text-gray-600">Release Type</div>
                                                <div class="mt-1">{{filterRequiredIds('type', selectedReleaseDetails.releaseTypeId)}}</div>
                                            </div>

                                            <!-- Release Target -->
                                            <div class="w-6/12 mb-6">
                                                <div class="text-xs uppercase text-gray-600">Release Target</div>
                                                <div class="mt-1">{{filterRequiredIds('target', selectedReleaseDetails.releaseTargetId)}}</div>
                                            </div>

                                            <!-- Closing On -->
                                            <div class="w-6/12 mb-6">
                                                <div class="text-xs uppercase text-gray-600">Release Closing On</div>
                                                <div class="mt-1">{{selectedReleaseDetails.releaseClosingDate | date}}</div>
                                            </div>

                                            <div class="text-xs text-gray-600 mt-6" *ngIf="selectedReleaseDetails.lastModifiedById">
                                                Last Modified by: <span class="hover:underline hover:text-blue-600 cursor-pointer w-fit" [routerLink]="['../../admin/members', selectedReleaseDetails.lastModifiedById]">{{filterRequiredIds('teamMember', selectedReleaseDetails.lastModifiedById)}}</span> on {{selectedReleaseDetails.lastModifiedDate | date:'medium'}}
                                            </div>
                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                        </div>

                        <!-- If no releases created under client -->
                        <div class="w-full py-14" *ngIf="!releasesList?.length">
                            <div class="text-gray-600 text-center">No releases available for {{clientDetails.clientName}}.</div>
                            <div class="mt-4 flex justify-center">
                                <button mat-flat-button class="" color="primary" [routerLink]="['../../releases/create']">Create New Release</button>
                            </div>
                        </div>
                    </div>
                </mat-tab>

                <!-- Requirements Tab -->
                <mat-tab label="Requirements">
                    <div class="w-full flex flex-wrap items-center px-4 border-t border-gray-200">

                        <mat-accordion class="w-full mt-4 mb-3 border border-gray-300 rounded" *ngFor="let phase of phases">
                            <mat-expansion-panel (opened)="requirementsPanelOpenState = true"
                                                 (closed)="requirementsPanelOpenState = false">
                              <mat-expansion-panel-header>
                                <mat-panel-title>
                                  #Phase {{phase.phaseNumber}}
                                </mat-panel-title>
                                <mat-panel-description class="text-xs">
                                    {{phase.phaseStartDate}} - {{phase.phaseEndDate}}
                                </mat-panel-description>
                              </mat-expansion-panel-header>
                              
                              <!-- Panel Content -->
                              <div class="w-full">
                                <div class="w-full flex justify-between items-center p-4 border mb-4 border-gray-200 rounded-md"
                                *ngFor="let requirement of phase.requirements" [ngClass]="{'shadow-xl border-gray-300' : viewMoreReqDetails === requirement.id}">
                                    <div class="w-11/12">
                                        <!-- Title, Desc, Project, Type, Links, Start Date, End Date, Status -->
                                        <div class="w-full text-lg">{{requirement.title}}</div>
                                        <div class="w-full text-xs text-gray-500">{{requirement.description}}</div>
                                        <div class="w-full pt-3" *ngIf="viewMoreReqDetails !== requirement.id " (click)="toggleRequirementView(requirement.id)"><span class=" text-xs text-blue-500 cursor-pointer">Show More Details</span></div>
                                        <div class="w-full pt-3" *ngIf="viewMoreReqDetails === requirement.id" (click)="toggleRequirementView('')"><span class=" text-xs text-blue-500 cursor-pointer">View Less</span></div>
                                        <div class="w-full flex mt-8" *ngIf="viewMoreReqDetails === requirement.id">
                                            <div class="mr-24">
                                                <div class="text-xs uppercase">Requirement Type</div>
                                                <div class="mt-2">{{requirement.type}}</div>
                                            </div>
                                            <div class="mr-24">
                                                <div class="text-xs uppercase">Project</div>
                                                <div class="mt-2">{{requirement.projectName}}</div>
                                            </div>
                                            <div class="mr-24">
                                                <div class="text-xs uppercase">Label</div>
                                                <div class="mt-2">{{requirement.label}}</div>
                                            </div>
                                            <div class="mr-24">
                                                <div class="text-xs uppercase">Start Date</div>
                                                <div class="mt-2">{{requirement.startDate}}</div>
                                            </div>
                                            <div class="mr-24">
                                                <div class="text-xs uppercase">End Date</div>
                                                <div class="mt-2">{{requirement.endDate}}</div>
                                            </div>
                                            <div class="mr-24">
                                                <div class="text-xs uppercase">Status</div>
                                                <div class=" mt-2">
                                                    <span class="text-right text-xs px-3 py-0.5 rounded-full uppercase" [ngClass]="getStatusStyle(requirement.status)">{{requirement.status}}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="w-1/12 flex justify-end ">
                                        <button mat-icon-button class="">
                                            <mat-icon>more_vert</mat-icon>
                                        </button>
                                    </div>
                                </div>
                              </div>
                            </mat-expansion-panel>
                        </mat-accordion>
                    </div>
                </mat-tab>

                <!-- Demos Tab -->
                <mat-tab label="Demos">
                    <div class="w-full flex flex-wrap items-center px-4 border-t border-gray-200">

                        <!-- In Pgoress -->
                        <div class="w-full flex justify-center p-3 mt-6">
                            <img class="w-3/12" src="assets/gifs/dev-progress.gif">
                        </div>
                        <div class="w-full text-center text-gray-600 -mt-28 font-bold">
                            Feature Coming Soon...
                        </div>
                    </div>
                </mat-tab>

                <!-- Timeline Tab -->
                <mat-tab label="Timeline">
                    <div class="w-full flex flex-wrap items-center px-4 border-t border-gray-200">

                        <!-- In Pgoress -->
                        <div class="w-full flex justify-center p-3 mt-6">
                            <img class="w-3/12" src="assets/gifs/dev-progress.gif">
                        </div>
                        <div class="w-full text-center text-gray-600 -mt-28 font-bold">
                            Feature Coming Soon...
                        </div>
                    </div>
                </mat-tab>
            </mat-tab-group>
        </div>
    </div>
</div>

