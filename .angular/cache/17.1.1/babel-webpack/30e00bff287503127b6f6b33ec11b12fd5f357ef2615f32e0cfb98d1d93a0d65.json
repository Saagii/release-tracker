{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/modules/shared/services/status.service\";\nimport * as i2 from \"src/app/modules/main/services/projects.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"src/app/modules/main/services/clients.service\";\nimport * as i5 from \"src/app/modules/main/services/members.service\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/material/icon\";\nimport * as i8 from \"@angular/material/button\";\nimport * as i9 from \"@angular/material/menu\";\nfunction ProjectViewComponent_div_2_div_9_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 11)(1, \"div\", 29);\n    i0.ɵɵlistener(\"click\", function ProjectViewComponent_div_2_div_9_div_7_Template_div_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const status_r6 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r7.tempStatusValue = status_r6._id);\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const status_r6 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(status_r6.value);\n  }\n}\nfunction ProjectViewComponent_div_2_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 11)(1, \"div\", 25);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementStart(3, \"mat-icon\", 26);\n    i0.ɵɵtext(4, \"arrow_drop_down\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"mat-menu\", null, 27);\n    i0.ɵɵtemplate(7, ProjectViewComponent_div_2_div_9_div_7_Template, 3, 1, \"div\", 28);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const _r4 = i0.ɵɵreference(6);\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngClass\", ctx_r1.getStatusStyle(ctx_r1.filterRequiredIds(\"status\", ctx_r1.tempStatusValue)))(\"matMenuTriggerFor\", _r4);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.filterRequiredIds(\"status\", ctx_r1.tempStatusValue), \" \");\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.projectConfig.status);\n  }\n}\nconst _c0 = a1 => [\"../../admin/members\", a1];\nfunction ProjectViewComponent_div_2_div_38_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(2, _c0, ctx_r2.projectDetails.projectManagerId));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r2.filterRequiredIds(\"teamMember\", ctx_r2.projectDetails.projectManagerId));\n  }\n}\nfunction ProjectViewComponent_div_2_div_48_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(2, _c0, ctx_r3.projectDetails.createdById));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r3.filterRequiredIds(\"teamMember\", ctx_r3.projectDetails.createdById));\n  }\n}\nconst _c1 = () => [\"../\"];\nfunction ProjectViewComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 3)(1, \"div\", 4)(2, \"div\", 5)(3, \"div\", 6)(4, \"span\", 7);\n    i0.ɵɵtext(5, \"Projects\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\", 8);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"div\", 9);\n    i0.ɵɵtemplate(9, ProjectViewComponent_div_2_div_9_Template, 8, 4, \"div\", 10);\n    i0.ɵɵelementStart(10, \"div\", 11)(11, \"div\", 12)(12, \"button\", 13)(13, \"mat-icon\", 14);\n    i0.ɵɵtext(14, \"edit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(15, \" Edit Project \");\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelementStart(16, \"div\", 15)(17, \"div\", 16);\n    i0.ɵɵtext(18, \"Basic Details\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"div\", 17)(20, \"div\", 18)(21, \"div\", 19);\n    i0.ɵɵtext(22, \"Project Description\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"div\", 20);\n    i0.ɵɵtext(24);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(25, \"div\", 21)(26, \"div\", 19);\n    i0.ɵɵtext(27, \"Project Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(28, \"div\", 20);\n    i0.ɵɵtext(29);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(30, \"div\", 22)(31, \"div\", 19);\n    i0.ɵɵtext(32, \"Client\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(33, \"div\", 23);\n    i0.ɵɵtext(34);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(35, \"div\", 22)(36, \"div\", 19);\n    i0.ɵɵtext(37, \"Project Manager\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(38, ProjectViewComponent_div_2_div_38_Template, 2, 4, \"div\", 24);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(39, \"div\", 22)(40, \"div\", 19);\n    i0.ɵɵtext(41, \"Created On\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(42, \"div\", 20);\n    i0.ɵɵtext(43);\n    i0.ɵɵpipe(44, \"date\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(45, \"div\", 22)(46, \"div\", 19);\n    i0.ɵɵtext(47, \"Created By\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(48, ProjectViewComponent_div_2_div_48_Template, 2, 4, \"div\", 24);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(13, _c1));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r0.projectDetails.projectName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.tempStatusValue !== \"\");\n    i0.ɵɵadvance(15);\n    i0.ɵɵtextInterpolate(ctx_r0.projectDetails.description);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r0.projectDetails.projectName);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(14, _c0, ctx_r0.projectDetails.projectManagerId));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.filterRequiredIds(\"client\", ctx_r0.projectDetails.clientId));\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.teamMembersDetailsList.length === ctx_r0.projectDetails.teamMembers.length);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(44, 10, ctx_r0.projectDetails.createdOn, \"medium\"));\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.teamMembersDetailsList.length === ctx_r0.projectDetails.teamMembers.length);\n  }\n}\nexport let ProjectViewComponent = /*#__PURE__*/(() => {\n  class ProjectViewComponent {\n    constructor(statusService, projectsService, _activatedRoute, clientsService, membersService) {\n      this.statusService = statusService;\n      this.projectsService = projectsService;\n      this._activatedRoute = _activatedRoute;\n      this.clientsService = clientsService;\n      this.membersService = membersService;\n      this.projectId = '';\n      this.tempStatusValue = '';\n      this.teamMembersCount = 0;\n      this.teamMembersDetailsList = [];\n    }\n    ngOnInit() {\n      this.projectId = this._activatedRoute.snapshot.params['id'];\n      // Get clients list.\n      this.getClientsList();\n      // Get project configurations.\n      this.getProjectConfigurations();\n    }\n    /*\n      Get Status Style\n    */\n    getStatusStyle(statusValue) {\n      return this.statusService.getStatusStyle(statusValue);\n    }\n    /*\n      Get project details by project Id.\n    */\n    getProjectDetailsByProjectId(projectId) {\n      this.projectsService.getProjectDetailsByProjectId(projectId).subscribe(response => {\n        console.log(response);\n        this.projectDetails = response;\n        this.projectDetails.teamMembers.push(this.projectDetails.projectManagerId);\n        // Set Status\n        this.tempStatusValue = this.projectDetails.statusId;\n        // Get project team members details.\n        this.getMemberDetails();\n      });\n    }\n    /*\n      Get Clients List.\n    */\n    getClientsList() {\n      this.clientsService.getClientsList().subscribe(response => {\n        console.log(response);\n        this.clientsList = response;\n      });\n    }\n    /*\n      Get Project Configurations.\n    */\n    getProjectConfigurations() {\n      this.projectsService.getProjectsConfig().subscribe(projectConfig => {\n        console.log(projectConfig);\n        this.projectConfig = projectConfig;\n        // Get project details by project id.\n        this.getProjectDetailsByProjectId(this.projectId);\n      });\n    }\n    /*\n    Get Members List.\n    */\n    getMemberDetails() {\n      if (this.teamMembersCount < this.projectDetails.teamMembers.length) {\n        this.membersService.getMemberDetails(this.projectDetails.teamMembers[this.teamMembersCount]).subscribe(response => {\n          console.log(response);\n          // Push member details.\n          this.teamMembersDetailsList.push(response);\n          // Count Increment.\n          this.teamMembersCount = this.teamMembersCount + 1;\n          // Call method again until count is greater than the projects list length.\n          this.getMemberDetails();\n        });\n      } else {\n        console.log(this.teamMembersDetailsList);\n      }\n    }\n    /*\n    Filter clients, release config IDs.\n    */\n    filterRequiredIds(type, id) {\n      // Return client name.\n      if (type === 'client') {\n        return this.clientsList.filter(client => {\n          return client._id === id;\n        })[0].clientName;\n      }\n      // Return project status.\n      if (type === 'status') {\n        return this.projectConfig.status.filter(status => {\n          return status._id === id;\n        })[0].value;\n      }\n      // Return member name.\n      if (type === 'teamMember') {\n        console.log(this.teamMembersDetailsList);\n        const memberDetails = this.teamMembersDetailsList.filter(member => {\n          return member.id === id;\n        })[0];\n        return memberDetails.firstName + ' ' + memberDetails.lastName;\n      }\n    }\n    static #_ = this.ɵfac = function ProjectViewComponent_Factory(t) {\n      return new (t || ProjectViewComponent)(i0.ɵɵdirectiveInject(i1.StatusService), i0.ɵɵdirectiveInject(i2.ProjectsService), i0.ɵɵdirectiveInject(i3.ActivatedRoute), i0.ɵɵdirectiveInject(i4.ClientsService), i0.ɵɵdirectiveInject(i5.MembersService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ProjectViewComponent,\n      selectors: [[\"app-project-view\"]],\n      decls: 3,\n      vars: 1,\n      consts: [[1, \"w-full\", \"px-4\"], [1, \"w-full\", \"my-2\", \"p-4\"], [\"class\", \"w-full mt-2\", 4, \"ngIf\"], [1, \"w-full\", \"mt-2\"], [1, \"w-full\", \"flex\", \"justify-between\"], [1, \"w-8/12\"], [1, \"w-fit\", \"font-bold\", 3, \"routerLink\"], [1, \"text-blue-600\", \"cursor-pointer\", \"uppercase\", \"hover:underline\"], [1, \"w-full\", \"text-2xl\", \"mt-1\"], [1, \"w-4/12\", \"flex\", \"justify-end\", \"items-center\"], [\"class\", \"\", 4, \"ngIf\"], [1, \"\"], [1, \"ml-4\"], [\"mat-stroked-button\", \"\", 1, \"text-gray-600\", \"text-xs\"], [1, \"text-sm\", \"mt-1\", \"-ml-2\"], [1, \"w-full\", \"mt-4\", \"border\", \"border-gray-200\", \"rounded-lg\", \"p-4\"], [1, \"w-full\", \"text-lg\"], [1, \"w-full\", \"flex\", \"flex-wrap\", \"justify-between\", \"mt-4\"], [1, \"w-full\", \"mb-8\"], [1, \"text-xs\", \"uppercase\", \"text-gray-600\"], [1, \"mt-1\"], [1, \"w-3/12\"], [1, \"w-2/12\"], [1, \"mt-1\", \"hover:underline\", \"hover:text-blue-600\", \"cursor-pointer\", \"w-fit\", 3, \"routerLink\"], [\"class\", \"mt-1 hover:underline hover:text-blue-600 cursor-pointer w-fit\", 3, \"routerLink\", 4, \"ngIf\"], [\"mat-flat-button\", \"\", 1, \"select-none\", \"cursor-pointer\", \"rounded-full\", \"px-3\", \"pr-2\", \"py-1\", \"flex\", \"items-center\", \"text-xs\", \"uppercase\", 3, \"ngClass\", \"matMenuTriggerFor\"], [1, \"cursor-pointer\", \"bg-white\", \"rounded-full\", \"ml-3\"], [\"matStatusMenu\", \"matMenu\"], [\"class\", \"\", 4, \"ngFor\", \"ngForOf\"], [1, \"text-xs\", \"p-3\", \"uppercase\", \"hover:bg-gray-100\", \"cursor-pointer\", \"hover:font-bold\", \"hover:text-blue-800\", \"hover:border-l-2\", \"hover:border-blue-800\", 3, \"click\"]],\n      template: function ProjectViewComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n          i0.ɵɵtemplate(2, ProjectViewComponent_div_2_Template, 49, 16, \"div\", 2);\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.projectDetails);\n        }\n      },\n      dependencies: [i6.NgClass, i6.NgForOf, i6.NgIf, i3.RouterLink, i7.MatIcon, i8.MatButton, i9.MatMenu, i9.MatMenuTrigger, i6.DatePipe],\n      encapsulation: 2\n    });\n  }\n  return ProjectViewComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}