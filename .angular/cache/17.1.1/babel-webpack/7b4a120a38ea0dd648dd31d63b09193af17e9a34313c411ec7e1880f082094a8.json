{"ast":null,"code":"import { statusListMockDataMenu } from 'src/app/modules/shared/data/status-list-mock-data';\nimport { notesMockDataMenu } from '../../../../data/notes-mock-data';\nimport { releaseAdvancedDetailsMenu } from '../../data/release-advanced-details-menu';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/modules/shared/services/status.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"src/app/modules/main/services/releases.service\";\nimport * as i4 from \"src/app/modules/main/services/clients.service\";\nimport * as i5 from \"src/app/modules/main/services/members.service\";\nimport * as i6 from \"src/app/modules/main/services/projects.service\";\nimport * as i7 from \"@angular/common\";\nimport * as i8 from \"@angular/material/icon\";\nimport * as i9 from \"@angular/material/button\";\nimport * as i10 from \"@angular/material/menu\";\nimport * as i11 from \"@angular/material/progress-spinner\";\nfunction ReleaseViewComponent_div_1_div_10_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 12)(1, \"div\", 30);\n    i0.ɵɵlistener(\"click\", function ReleaseViewComponent_div_1_div_10_div_7_Template_div_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const status_r6 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r7.tempStatusValue = status_r6._id);\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const status_r6 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(status_r6.value);\n  }\n}\nfunction ReleaseViewComponent_div_1_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12)(1, \"div\", 26);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementStart(3, \"mat-icon\", 27);\n    i0.ɵɵtext(4, \"arrow_drop_down\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"mat-menu\", null, 28);\n    i0.ɵɵtemplate(7, ReleaseViewComponent_div_1_div_10_div_7_Template, 3, 1, \"div\", 29);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const _r4 = i0.ɵɵreference(6);\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngClass\", ctx_r2.getStatusStyle(ctx_r2.filterRequiredIds(\"status\", ctx_r2.tempStatusValue)))(\"matMenuTriggerFor\", _r4);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.filterRequiredIds(\"status\", ctx_r2.tempStatusValue), \" \");\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.releaseConfigDetails.status);\n  }\n}\nfunction ReleaseViewComponent_div_1_div_63_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 31)(1, \"div\", 32)(2, \"div\", 33)(3, \"div\", 34);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 35);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\", 36)(8, \"button\", 37)(9, \"mat-icon\");\n    i0.ɵɵtext(10, \"keyboard_arrow_right\");\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const menu_r9 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(menu_r9.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(menu_r9.description);\n  }\n}\nconst _c0 = () => [\"../\"];\nconst _c1 = a1 => [\"../../admin/members\", a1];\nconst _c2 = a1 => [\"../../projects\", a1];\nfunction ReleaseViewComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 3)(1, \"div\", 4)(2, \"div\", 5)(3, \"div\", 6)(4, \"div\", 7)(5, \"span\", 8);\n    i0.ɵɵtext(6, \"Releases\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\", 9);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"div\", 10);\n    i0.ɵɵtemplate(10, ReleaseViewComponent_div_1_div_10_Template, 8, 4, \"div\", 11);\n    i0.ɵɵelementStart(11, \"div\", 12)(12, \"div\", 13)(13, \"button\", 14)(14, \"mat-icon\", 15);\n    i0.ɵɵtext(15, \"edit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(16, \" Edit Release \");\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelementStart(17, \"div\", 16)(18, \"div\", 17);\n    i0.ɵɵtext(19, \"Basic Details\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"div\", 18)(21, \"div\", 19)(22, \"div\", 20);\n    i0.ɵɵtext(23, \"Release Owner\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"div\", 21);\n    i0.ɵɵtext(25);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(26, \"div\", 19)(27, \"div\", 20);\n    i0.ɵɵtext(28, \"Release Created On\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(29, \"div\", 22);\n    i0.ɵɵtext(30);\n    i0.ɵɵpipe(31, \"date\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(32, \"div\", 19)(33, \"div\", 20);\n    i0.ɵɵtext(34, \"Release Closing On\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(35, \"div\", 22);\n    i0.ɵɵtext(36);\n    i0.ɵɵpipe(37, \"date\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(38, \"div\", 19)(39, \"div\", 20);\n    i0.ɵɵtext(40, \"Release Created By\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(41, \"div\", 21);\n    i0.ɵɵtext(42);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(43, \"div\", 23)(44, \"div\", 19)(45, \"div\", 20);\n    i0.ɵɵtext(46, \"Client\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(47, \"div\", 21);\n    i0.ɵɵtext(48);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(49, \"div\", 19)(50, \"div\", 20);\n    i0.ɵɵtext(51, \"Project Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(52, \"div\", 21);\n    i0.ɵɵtext(53);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(54, \"div\", 19)(55, \"div\", 20);\n    i0.ɵɵtext(56, \"Project Manager\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(57, \"div\", 21);\n    i0.ɵɵtext(58);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(59, \"div\", 16)(60, \"div\", 17);\n    i0.ɵɵtext(61, \"Advanced Details\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(62, \"div\", 24);\n    i0.ɵɵtemplate(63, ReleaseViewComponent_div_1_div_63_Template, 11, 2, \"div\", 25);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(21, _c0));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r0.releaseDetails.releaseTitle);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.tempStatusValue !== \"\");\n    i0.ɵɵadvance(14);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(22, _c1, ctx_r0.releaseDetails.releaseOwnerId));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.filterRequiredIds(\"member\", ctx_r0.releaseDetails.releaseOwnerId));\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(31, 16, ctx_r0.releaseDetails.releaseCreatedOnDate, \"medium\"));\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(37, 19, ctx_r0.releaseDetails.releaseClosingDate));\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(24, _c1, ctx_r0.releaseDetails.releaseCreatedById));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.filterRequiredIds(\"member\", ctx_r0.releaseDetails.releaseCreatedById));\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(26, _c1, ctx_r0.releaseDetails.clientId));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.filterRequiredIds(\"client\", ctx_r0.releaseDetails.clientId));\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(28, _c2, ctx_r0.projectDetails._id));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.projectDetails.projectName);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(30, _c1, ctx_r0.projectDetails.projectManagerId));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.filterRequiredIds(\"member\", ctx_r0.projectDetails.projectManagerId));\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.advancedDetailsMenu);\n  }\n}\nfunction ReleaseViewComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 38)(1, \"div\", 39);\n    i0.ɵɵelement(2, \"mat-spinner\", 40);\n    i0.ɵɵelementStart(3, \"span\", 41);\n    i0.ɵɵtext(4, \"Loading Release details. Please Wait ...\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"diameter\", 20);\n  }\n}\nexport let ReleaseViewComponent = /*#__PURE__*/(() => {\n  class ReleaseViewComponent {\n    constructor(statusService, _activatedRoute, releasesService, clientsService, membersService, projectsService) {\n      this.statusService = statusService;\n      this._activatedRoute = _activatedRoute;\n      this.releasesService = releasesService;\n      this.clientsService = clientsService;\n      this.membersService = membersService;\n      this.projectsService = projectsService;\n      this.tempStatusValue = '';\n      this.releaseNotes = notesMockDataMenu;\n      this.releaseId = '';\n      this.advancedDetailsMenu = releaseAdvancedDetailsMenu;\n    }\n    ngOnInit() {\n      for (const statusMenu of statusListMockDataMenu) {\n        if (statusMenu.type === 'Release') {\n          this.statusListMenu = statusMenu;\n        }\n      }\n      this.releaseId = this._activatedRoute.snapshot.params['id'];\n      // Get release config.\n      this.getReleaseConfigDetails();\n      // Get members list.\n      this.getMembersList();\n    }\n    /*\n      Get Status Style\n    */\n    getStatusStyle(statusValue) {\n      return this.statusService.getStatusStyle(statusValue);\n    }\n    /*\n      Get release config details.\n    */\n    getReleaseConfigDetails() {\n      this.releasesService.getReleasesConfig().subscribe(releaseConfig => {\n        console.log(releaseConfig);\n        this.releaseConfigDetails = releaseConfig;\n        // Get Clients list.\n        this.getClientsList();\n      });\n    }\n    /*\n      Get Clients List.\n    */\n    getClientsList() {\n      this.clientsService.getClientsList().subscribe(response => {\n        console.log(response);\n        this.clientsList = response;\n        // Get Releases details.\n        this.getReleasesDetails();\n      });\n    }\n    /*\n      Get Members List.\n    */\n    getMembersList() {\n      this.membersService.getMembersListByType('Internal').subscribe(response => {\n        console.log(response);\n        this.membersList = response;\n      });\n    }\n    /*\n      Get Releases details.\n    */\n    getReleasesDetails() {\n      this.releasesService.getReleaseDetails(this.releaseId).subscribe(releaseDetails => {\n        console.log(releaseDetails);\n        setTimeout(() => {\n          this.releaseDetails = releaseDetails;\n          // Set Status\n          this.tempStatusValue = this.releaseDetails.releaseStatusId;\n          // Get Project Details by project Id.\n          this.getProjectDetailsByProjectId(this.releaseDetails.projectId);\n        }, 500);\n      });\n    }\n    /*\n      Get project details by project Id.\n    */\n    getProjectDetailsByProjectId(projectId) {\n      this.projectsService.getProjectDetailsByProjectId(projectId).subscribe(response => {\n        console.log(response);\n        this.projectDetails = response;\n      });\n    }\n    /*\n      Filter clients, release config IDs.\n    */\n    filterRequiredIds(type, id) {\n      // Return Status value.\n      if (type === 'status') {\n        return this.releaseConfigDetails.status.filter(status => {\n          return status._id === id;\n        })[0]?.value;\n      }\n      // Return Target value.\n      if (type === 'target') {\n        return this.releaseConfigDetails.targets.filter(target => {\n          return target._id === id;\n        })[0]?.value;\n      }\n      // Return Type value.\n      if (type === 'type') {\n        return this.releaseConfigDetails.types.filter(type => {\n          return type._id === id;\n        })[0]?.value;\n      }\n      // Return Owner value.\n      if (type === 'owner' || type === 'member') {\n        const member = this.membersList.filter(member => {\n          return member._id === id;\n        })[0];\n        console.log(member);\n        return member.firstName + ' ' + member.lastName;\n      }\n      // Return client name.\n      if (type === 'client') {\n        return this.clientsList.filter(client => {\n          return client._id === id;\n        })[0].clientName;\n      }\n    }\n    static #_ = this.ɵfac = function ReleaseViewComponent_Factory(t) {\n      return new (t || ReleaseViewComponent)(i0.ɵɵdirectiveInject(i1.StatusService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.ReleasesService), i0.ɵɵdirectiveInject(i4.ClientsService), i0.ɵɵdirectiveInject(i5.MembersService), i0.ɵɵdirectiveInject(i6.ProjectsService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ReleaseViewComponent,\n      selectors: [[\"app-release-view\"]],\n      decls: 3,\n      vars: 2,\n      consts: [[1, \"w-full\", \"px-4\"], [\"class\", \"w-full my-2 p-4\", 4, \"ngIf\"], [\"class\", \"w-full flex justify-center py-28\", 4, \"ngIf\"], [1, \"w-full\", \"my-2\", \"p-4\"], [1, \"w-full\", \"mt-2\"], [1, \"w-full\", \"flex\", \"justify-between\"], [1, \"w-8/12\"], [1, \"w-fit\", \"font-bold\", 3, \"routerLink\"], [1, \"text-blue-600\", \"cursor-pointer\", \"uppercase\", \"hover:underline\"], [1, \"w-full\", \"text-2xl\", \"mt-1\"], [1, \"w-4/12\", \"flex\", \"justify-end\", \"items-center\"], [\"class\", \"\", 4, \"ngIf\"], [1, \"\"], [1, \"ml-4\"], [\"mat-stroked-button\", \"\", 1, \"text-gray-600\", \"text-xs\"], [1, \"text-sm\", \"mt-1\", \"-ml-2\"], [1, \"w-full\", \"mt-4\", \"border\", \"border-gray-200\", \"rounded-lg\", \"p-4\"], [1, \"w-full\", \"text-lg\"], [1, \"w-full\", \"flex\", \"flex-wrap\", \"justify-start\", \"mt-4\"], [1, \"w-3/12\"], [1, \"text-xs\", \"uppercase\", \"text-gray-600\"], [1, \"mt-1\", \"hover:underline\", \"hover:text-blue-600\", \"cursor-pointer\", \"w-fit\", 3, \"routerLink\"], [1, \"mt-1\"], [1, \"w-full\", \"flex\", \"flex-wrap\", \"justify-start\", \"mt-6\"], [1, \"w-full\", \"flex\", \"flex-wrap\", \"justify-start\", \"items-stretch\"], [\"class\", \"w-6/12 p-2\", 4, \"ngFor\", \"ngForOf\"], [\"mat-flat-button\", \"\", 1, \"select-none\", \"cursor-pointer\", \"rounded-full\", \"px-3\", \"pr-2\", \"py-1\", \"flex\", \"items-center\", \"text-xs\", \"uppercase\", 3, \"ngClass\", \"matMenuTriggerFor\"], [1, \"cursor-pointer\", \"bg-white\", \"rounded-full\", \"ml-3\"], [\"matStatusMenu\", \"matMenu\"], [\"class\", \"\", 4, \"ngFor\", \"ngForOf\"], [1, \"text-xs\", \"p-3\", \"uppercase\", \"hover:bg-gray-100\", \"cursor-pointer\", \"hover:font-bold\", \"hover:text-blue-800\", \"hover:border-l-2\", \"hover:border-blue-800\", 3, \"click\"], [1, \"w-6/12\", \"p-2\"], [1, \"w-full\", \"flex\", \"items-center\", \"text-gray-800\", \"border\", \"border-gray-200\", \"rounded-lg\", \"p-4\", \"cursor-pointer\", \"hover:border-blue-400\", \"hover:text-blue-600\", \"hover:font-bold\"], [1, \"w-11/12\"], [1, \"w-full\"], [1, \"w-full\", \"text-xs\", \"text-gray-600\", \"mt-3\", \"font-normal\"], [1, \"w-1/12\", \"flex\", \"justify-end\"], [\"mat-icon-button\", \"\", \"color\", \"primary\", 1, \"\"], [1, \"w-full\", \"flex\", \"justify-center\", \"py-28\"], [1, \"flex\", \"items-center\"], [3, \"diameter\"], [1, \"ml-2\"]],\n      template: function ReleaseViewComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0);\n          i0.ɵɵtemplate(1, ReleaseViewComponent_div_1_Template, 64, 32, \"div\", 1)(2, ReleaseViewComponent_div_2_Template, 5, 1, \"div\", 2);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.releaseDetails);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.releaseDetails);\n        }\n      },\n      dependencies: [i7.NgClass, i7.NgForOf, i7.NgIf, i2.RouterLink, i8.MatIcon, i9.MatButton, i9.MatIconButton, i10.MatMenu, i10.MatMenuTrigger, i11.MatProgressSpinner, i7.DatePipe],\n      encapsulation: 2\n    });\n  }\n  return ReleaseViewComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}