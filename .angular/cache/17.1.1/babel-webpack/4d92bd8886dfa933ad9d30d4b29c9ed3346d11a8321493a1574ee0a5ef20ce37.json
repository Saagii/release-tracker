{"ast":null,"code":"import { DialogSharedComponent } from 'src/app/modules/shared/components/dialog/dialog.component';\nimport { systemConfigurationsCategories } from '../../../data/system-configurations-categories';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/modules/shared/services/status.service\";\nimport * as i2 from \"src/app/modules/main/services/releases.service\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@angular/material/dialog\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/material/icon\";\nimport * as i7 from \"@angular/material/button\";\nfunction ReleasesConfigurationComponent_span_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 9);\n    i0.ɵɵtext(1, \" > \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ReleasesConfigurationComponent_span_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 10);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r1.activeReleaseCategory);\n  }\n}\nfunction ReleasesConfigurationComponent_div_9_div_5_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 19);\n    i0.ɵɵlistener(\"click\", function ReleasesConfigurationComponent_div_9_div_5_div_1_Template_div_click_0_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const category_r7 = i0.ɵɵnextContext().$implicit;\n      const ctx_r9 = i0.ɵɵnextContext(2);\n      ctx_r9.activeComponent = ctx_r9.releaseCategories.releases.component;\n      ctx_r9.activeReleaseCategory = category_r7.title;\n      return i0.ɵɵresetView(ctx_r9.releaseConfigLocalStorageActions(\"set\"));\n    });\n    i0.ɵɵelementStart(1, \"div\", 20)(2, \"div\", 21);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"div\", 22)(5, \"button\", 23)(6, \"mat-icon\");\n    i0.ɵɵtext(7, \"keyboard_arrow_right\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const category_r7 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(category_r7.title);\n  }\n}\nfunction ReleasesConfigurationComponent_div_9_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 17);\n    i0.ɵɵtemplate(1, ReleasesConfigurationComponent_div_9_div_5_div_1_Template, 8, 1, \"div\", 18);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const category_r7 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", category_r7.type === \"BASIC\");\n  }\n}\nfunction ReleasesConfigurationComponent_div_9_div_9_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 19);\n    i0.ɵɵlistener(\"click\", function ReleasesConfigurationComponent_div_9_div_9_div_1_Template_div_click_0_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const category_r13 = i0.ɵɵnextContext().$implicit;\n      const ctx_r15 = i0.ɵɵnextContext(2);\n      ctx_r15.activeComponent = ctx_r15.releaseCategories.releases.component;\n      ctx_r15.activeReleaseCategory = category_r13.title;\n      return i0.ɵɵresetView(ctx_r15.releaseConfigLocalStorageActions(\"set\"));\n    });\n    i0.ɵɵelementStart(1, \"div\", 20)(2, \"div\", 21);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"div\", 22)(5, \"button\", 23)(6, \"mat-icon\");\n    i0.ɵɵtext(7, \"keyboard_arrow_right\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const category_r13 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(category_r13.title);\n  }\n}\nfunction ReleasesConfigurationComponent_div_9_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 17);\n    i0.ɵɵtemplate(1, ReleasesConfigurationComponent_div_9_div_9_div_1_Template, 8, 1, \"div\", 18);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const category_r13 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", category_r13.type === \"CORE\");\n  }\n}\nfunction ReleasesConfigurationComponent_div_9_div_14_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r22 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 19);\n    i0.ɵɵlistener(\"click\", function ReleasesConfigurationComponent_div_9_div_14_div_1_Template_div_click_0_listener() {\n      i0.ɵɵrestoreView(_r22);\n      const category_r19 = i0.ɵɵnextContext().$implicit;\n      const ctx_r21 = i0.ɵɵnextContext(2);\n      ctx_r21.activeComponent = ctx_r21.releaseCategories.releases.component;\n      ctx_r21.activeReleaseCategory = category_r19.title;\n      return i0.ɵɵresetView(ctx_r21.releaseConfigLocalStorageActions(\"set\"));\n    });\n    i0.ɵɵelementStart(1, \"div\", 20)(2, \"div\", 21);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"div\", 22)(5, \"button\", 23)(6, \"mat-icon\");\n    i0.ɵɵtext(7, \"keyboard_arrow_right\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const category_r19 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(category_r19.title);\n  }\n}\nfunction ReleasesConfigurationComponent_div_9_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 17);\n    i0.ɵɵtemplate(1, ReleasesConfigurationComponent_div_9_div_14_div_1_Template, 8, 1, \"div\", 18);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const category_r19 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", category_r19.type === \"STRATEGY\");\n  }\n}\nfunction ReleasesConfigurationComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 11)(1, \"div\", 12)(2, \"div\", 13)(3, \"div\", 14);\n    i0.ɵɵtext(4, \"BASIC\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(5, ReleasesConfigurationComponent_div_9_div_5_Template, 2, 1, \"div\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 16)(7, \"div\", 14);\n    i0.ɵɵtext(8, \"CORE\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(9, ReleasesConfigurationComponent_div_9_div_9_Template, 2, 1, \"div\", 15);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(10, \"div\", 12)(11, \"div\", 13)(12, \"div\", 14);\n    i0.ɵɵtext(13, \"STRATEGY\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(14, ReleasesConfigurationComponent_div_9_div_14_Template, 2, 1, \"div\", 15);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.releaseCategories.releases.categories);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.releaseCategories.releases.categories);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.releaseCategories.releases.categories);\n  }\n}\nfunction ReleasesConfigurationComponent_div_10_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\nfunction ReleasesConfigurationComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24);\n    i0.ɵɵtemplate(1, ReleasesConfigurationComponent_div_10_ng_container_1_Template, 1, 0, \"ng-container\", 25);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngComponentOutlet\", ctx_r3.activeComponent);\n  }\n}\nconst _c0 = a0 => ({\n  \"hover:cursor-pointer\": a0\n});\nexport let ReleasesConfigurationComponent = /*#__PURE__*/(() => {\n  class ReleasesConfigurationComponent {\n    constructor(statusService, releaseService, fb, dialog) {\n      this.statusService = statusService;\n      this.releaseService = releaseService;\n      this.fb = fb;\n      this.dialog = dialog;\n      this.releaseCategories = systemConfigurationsCategories;\n      this.activeReleaseCategory = '';\n      this.enableTargetEditForm = false;\n      this.releaseConfigTypeLoader = false;\n      this.releaseConfigStatusLoader = false;\n      this.releaseConfigTargetLoader = false;\n      // Prepare Release Type Form\n      this.releaseConfigTypeForm = this.fb.group({\n        releaseType: ['']\n      });\n      // Prepare Release Status Form\n      this.releaseConfigStatusForm = this.fb.group({\n        releaseStatus: ['']\n      });\n      // Prepare Release Members Limit Form\n      this.releaseConfigTargetForm = this.fb.group({\n        releaseTarget: ['']\n      });\n    }\n    ngOnInit() {\n      // Get Releases Configuration Details.\n      this.getReleasesConfigurations();\n    }\n    /*\n      Get Status Style\n    */\n    getStatusStyle(statusValue) {\n      return this.statusService.getStatusStyle(statusValue);\n    }\n    /*\n      Get Release Configurations.\n    */\n    getReleasesConfigurations() {\n      this.releaseService.getReleasesConfig().subscribe(releaseConfig => {\n        console.log(releaseConfig);\n        this.releaseConfig = releaseConfig;\n      });\n    }\n    /*\n      Add release type configuration.\n    */\n    addReleaseConfigType() {\n      const releaseConfigTypePayload = {\n        releaseConfigId: this.releaseConfig._id,\n        types: [{\n          value: this.releaseConfigTypeForm.get('releaseType')?.value,\n          isMandatory: true\n        }]\n      };\n      // Enable Loaded\n      this.releaseConfigTypeLoader = true;\n      // Diable types form.\n      this.releaseConfigTypeForm.disable();\n      this.releaseService.addReleaseConfigType(releaseConfigTypePayload).subscribe(response => {\n        console.log(response);\n        // Disable Loader\n        this.releaseConfigTypeLoader = false;\n        // Enable the form & reset.\n        this.releaseConfigTypeForm.enable();\n        this.releaseConfigTypeForm.reset();\n        // Get the member config details.\n        this.getReleasesConfigurations();\n      }, error => {\n        console.log(error);\n        // Disable Loader\n        this.releaseConfigTypeLoader = false;\n        // Enable the form.\n        this.releaseConfigTypeForm.enable();\n      });\n    }\n    /*\n      Add release status configuration.\n    */\n    addReleaseConfigStatus() {\n      const releaseConfigStatusPayload = {\n        releaseConfigId: this.releaseConfig._id,\n        status: [{\n          value: this.releaseConfigStatusForm.get('releaseStatus')?.value,\n          isMandatory: true\n        }]\n      };\n      // Enable Loaded\n      this.releaseConfigStatusLoader = true;\n      // Diable types form.\n      this.releaseConfigStatusForm.disable();\n      this.releaseService.addReleaseConfigStatus(releaseConfigStatusPayload).subscribe(response => {\n        console.log(response);\n        // Disable Loader\n        this.releaseConfigStatusLoader = false;\n        // Enable the form & reset.\n        this.releaseConfigStatusForm.enable();\n        this.releaseConfigStatusForm.reset();\n        // Get the member config details.\n        this.getReleasesConfigurations();\n      }, error => {\n        console.log(error);\n        // Disable Loader\n        this.releaseConfigStatusLoader = false;\n        // Enable the form.\n        this.releaseConfigStatusForm.enable();\n      });\n    }\n    /*\n      Update release members limit configuration.\n    */\n    updateReleaseConfigTarget() {\n      const releaseConfigTargetPayload = {\n        releaseConfigId: this.releaseConfig._id,\n        membersLimit: this.releaseConfigTargetForm.get('releaseTarget')?.value\n      };\n      // Enable Loaded\n      this.releaseConfigTargetLoader = true;\n      // Diable types form.\n      this.releaseConfigTargetForm.disable();\n      this.releaseService.updateReleaseConfigTarget(releaseConfigTargetPayload).subscribe(response => {\n        console.log(response);\n        // Disable Loader\n        this.releaseConfigTargetLoader = false;\n        // Enable the form & reset.\n        this.releaseConfigTargetForm.enable();\n        this.releaseConfigTargetForm.reset();\n        // Hide Target Update Form.\n        this.enableTargetEditForm = !this.enableTargetEditForm;\n        // Get the member config details.\n        this.getReleasesConfigurations();\n      }, error => {\n        console.log(error);\n        // Disable Loader\n        this.releaseConfigTargetLoader = false;\n        // Enable the form.\n        this.releaseConfigTargetForm.enable();\n      });\n    }\n    /*\n      Delete Release Config Type.\n    */\n    deleteReleaseConfigType(releaseTypeId) {\n      const releaseConfigTypePayload = {\n        // releaseConfigId: this.releaseConfig._id,\n        typeId: releaseTypeId\n      };\n      this.releaseService.deleteReleaseConfigType(releaseConfigTypePayload).subscribe(response => {\n        console.log(response);\n        // Get the member config details.\n        this.getReleasesConfigurations();\n      }, error => {\n        console.log(error);\n      });\n    }\n    /*\n      Delete Release Config Status.\n    */\n    deleteReleaseConfigStatus(releaseStatusId) {\n      const releaseConfigStatusPayload = {\n        // releaseConfigId: this.releaseConfig._id,\n        statusId: releaseStatusId\n      };\n      this.releaseService.deleteReleaseConfigStatus(releaseConfigStatusPayload).subscribe(response => {\n        console.log(response);\n        // Get the member config details.\n        this.getReleasesConfigurations();\n      }, error => {\n        console.log(error);\n      });\n    }\n    /*\n      Set or Remove the local storage for release configuration active category.\n    */\n    releaseConfigLocalStorageActions(action) {\n      if (action === 'set') {\n        localStorage.setItem('activeReleaseCategory', this.activeReleaseCategory);\n      } else {\n        localStorage.removeItem('activeReleaseCategory');\n      }\n    }\n    /*\n      Dialog Method: Nav New Menu\n    */\n    navigationActions(actionData, actionType) {\n      this.dialog.open(DialogSharedComponent, {\n        panelClass: ['w-5/12'],\n        data: {\n          type: 'confirmation',\n          confirmationContent: {\n            title: 'Are you sure you want to delete ' + actionData.value + ' from release ' + actionType + ' ?',\n            subtitle: ''\n          }\n        }\n      }).afterClosed().subscribe(result => {\n        console.log(result);\n        if (result) {\n          if (actionType === 'type') {\n            this.deleteReleaseConfigType(actionData._id);\n          }\n          if (actionType === 'status') {\n            this.deleteReleaseConfigStatus(actionData._id);\n          }\n        }\n      });\n    }\n    static #_ = this.ɵfac = function ReleasesConfigurationComponent_Factory(t) {\n      return new (t || ReleasesConfigurationComponent)(i0.ɵɵdirectiveInject(i1.StatusService), i0.ɵɵdirectiveInject(i2.ReleasesService), i0.ɵɵdirectiveInject(i3.UntypedFormBuilder), i0.ɵɵdirectiveInject(i4.MatDialog));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ReleasesConfigurationComponent,\n      selectors: [[\"app-releases-configuration\"]],\n      decls: 11,\n      vars: 7,\n      consts: [[1, \"w-full\", \"px-16\", \"pb-24\"], [1, \"w-full\"], [1, \"text-xl\", \"px-2\"], [1, \"px-2\", \"mt-2\"], [1, \"font-bold\", \"text-blue-600\", 3, \"ngClass\", \"click\"], [\"class\", \"font-bold mx-1\", 4, \"ngIf\"], [\"class\", \"font-bold text-gray-600\", 4, \"ngIf\"], [\"class\", \"w-full flex flex-wrap justify-start mt-4\", 4, \"ngIf\"], [\"class\", \"w-full p-2 mt-4\", 4, \"ngIf\"], [1, \"font-bold\", \"mx-1\"], [1, \"font-bold\", \"text-gray-600\"], [1, \"w-full\", \"flex\", \"flex-wrap\", \"justify-start\", \"mt-4\"], [1, \"w-6/12\", \"p-2\"], [1, \"w-full\", \"border\", \"border-gray-200\", \"rounded-lg\", \"p-4\"], [1, \"text-xs\", \"text-gray-600\"], [\"class\", \"w-full cursor-pointer hover:text-blue-600 hover:font-bold\", 4, \"ngFor\", \"ngForOf\"], [1, \"w-full\", \"border\", \"border-gray-200\", \"rounded-lg\", \"p-4\", \"mt-4\"], [1, \"w-full\", \"cursor-pointer\", \"hover:text-blue-600\", \"hover:font-bold\"], [\"class\", \"w-full flex items-center\", 3, \"click\", 4, \"ngIf\"], [1, \"w-full\", \"flex\", \"items-center\", 3, \"click\"], [1, \"w-11/12\"], [1, \"mt-2\"], [1, \"w-1/12\", \"flex\", \"justify-end\"], [\"mat-icon-button\", \"\", \"color\", \"primary\", 1, \"\"], [1, \"w-full\", \"p-2\", \"mt-4\"], [4, \"ngComponentOutlet\"]],\n      template: function ReleasesConfigurationComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2);\n          i0.ɵɵtext(3, \"Release Configurations\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(4, \"div\", 3)(5, \"span\", 4);\n          i0.ɵɵlistener(\"click\", function ReleasesConfigurationComponent_Template_span_click_5_listener() {\n            ctx.activeReleaseCategory = \"\";\n            ctx.activeComponent = null;\n            return ctx.releaseConfigLocalStorageActions(\"remove\");\n          });\n          i0.ɵɵtext(6, \"Categories\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(7, ReleasesConfigurationComponent_span_7_Template, 2, 0, \"span\", 5)(8, ReleasesConfigurationComponent_span_8_Template, 2, 1, \"span\", 6);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(9, ReleasesConfigurationComponent_div_9_Template, 15, 3, \"div\", 7)(10, ReleasesConfigurationComponent_div_10_Template, 2, 1, \"div\", 8);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(5, _c0, ctx.activeReleaseCategory));\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.activeReleaseCategory != \"\");\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.activeReleaseCategory != \"\");\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.activeComponent);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.activeComponent != \"\");\n        }\n      },\n      dependencies: [i5.NgClass, i5.NgComponentOutlet, i5.NgForOf, i5.NgIf, i6.MatIcon, i7.MatIconButton],\n      encapsulation: 2\n    });\n  }\n  return ReleasesConfigurationComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}